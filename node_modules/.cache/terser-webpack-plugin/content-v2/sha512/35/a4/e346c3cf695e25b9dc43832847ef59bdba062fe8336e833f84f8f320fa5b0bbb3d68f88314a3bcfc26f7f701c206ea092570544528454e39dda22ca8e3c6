{"code":"!function(e){var r={};function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,r,t){o.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},o.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},o.t=function(e,r){if(1&r&&(e=o(e)),8&r)return e;if(4&r&&\"object\"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(o.r(t),Object.defineProperty(t,\"default\",{enumerable:!0,value:e}),2&r&&\"string\"!=typeof e)for(var n in e)o.d(t,n,function(r){return e[r]}.bind(null,n));return t},o.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(r,\"a\",r),r},o.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},o.p=\"\",o(o.s=0)}([function(e,r,o){\"use strict\";r.__esModule=!0;var t=o(1),n=o(2),i=function(e){return e.filter(function(e,r,o){return o.indexOf(e)==r})},l=[{bidprice:0,AdCode:\"\",Provider:\"\",PlacementID:0},{bidprice:0,AdCode:\"\",Provider:\"\",PlacementID:0}],s=[],d=[];!function(e){for(var r,o,u,a={},c=[],p=[],f=0;f<e.adslots.length;f++)r=e.adslots[f].ID,p.push(r),console.log(a);for(var f=1;f<=e.adslots.length;)for(var P=0;P<e.providersMap.length;P++)if(e.providersMap[P].AdSlotID===f){var v=e.adslots[f-1].Size;o=e.providersMap[P].FloorPrice;var h={AdSlotID:f,FloorPrice:o,Size:v};f++,c.push(h),console.log(c)}var I={bidderData:c};a.publishersId=1,a.slotsId=p,a.floorprices=[];for(var D=[],f=0;f<e.Provider.length;f++)u=e.Provider[f].EntryPoint,s.push(e.Provider[f].NAME),D.push(u),console.log(D);var b=(new t.default).getBids(D,I);setTimeout(function(){(b=i(b)).shift();for(var r=0;r<b.length;r++)b[r]=JSON.parse(b[r]);console.log(b,\"this\");for(var o=[],t=0;t<b.length;t++)o.push(b[t].Bidprices[0]),b[t].Bidprices[0]>l[0].bidprice&&(l[0].bidprice=b[t].Bidprices[0],l[0].Provider=b[t].ProviderName,l[0].AdCode=b[t].AdCode,l[0].PlacementID=0);d.push(o),o=[];for(var u=0;u<b.length;u++)o.push(b[u].Bidprices[1]),b[u].Bidprices[1]>l[1].bidprice&&(l[1].bidprice=b[u].Bidprices[1],l[1].Provider=b[u].ProviderName,l[1].AdCode=b[u].AdCode,l[1].PlacementID=0);d.push(o),document.getElementById(\"adslot1\").outerHTML=l[0].AdCode,document.getElementById(\"adslot2\").outerHTML=l[1].AdCode;var a=new n.default;a.logData(e,s,d,l)},300)}({Provider:[{ProviderID:1,NAME:\"OpenX\",EntryPoint:\"api/OpenX\"},{ProviderID:2,NAME:\"NetApp\",EntryPoint:\"api/NetApp\"},{ProviderID:3,NAME:\"InMobi\",EntryPoint:\"api/InMobi\"}],providersMap:[{RevenueShare:\"0.2\",FloorPrice:20,PlacementID:1,PublisherID:1,AdSlotID:1,ProviderID:1},{RevenueShare:\"0.2\",FloorPrice:20,PlacementID:2,PublisherID:1,AdSlotID:1,ProviderID:2},{RevenueShare:\"0.2\",FloorPrice:20,PlacementID:3,PublisherID:1,AdSlotID:1,ProviderID:3},{RevenueShare:\"0.25\",FloorPrice:40,PlacementID:1,PublisherID:1,AdSlotID:2,ProviderID:1},{RevenueShare:\"0.25\",FloorPrice:40,PlacementID:2,PublisherID:1,AdSlotID:2,ProviderID:2},{RevenueShare:\"0.25\",FloorPrice:40,PlacementID:3,PublisherID:1,AdSlotID:2,ProviderID:3}],adslots:[{ID:1,NAME:\"adslot1\",PublisherID:1,Size:200},{ID:2,NAME:\"adslot2\",PublisherID:1,Size:300}],publishers:[{PublisherID:1,NAME:\"Forbes\",IsActive:\"Y\"}]})},function(e,r,o){\"use strict\";r.__esModule=!0;var t=function(){function e(){}return e.prototype.getBids=function(e,r){for(var o=\"\",t=[],n=0;n<e.length;n++){o=\"http://localhost:5555/\"+e[n],console.log(o);var i=new XMLHttpRequest;i.open(\"POST\",o,!0),i.send(JSON.stringify(r)),i.onreadystatechange=function(){console.log(this.responseText),t.push(this.responseText)}}return t},e}();r.default=t},function(e,r,o){\"use strict\";r.__esModule=!0;var t=function(){function e(){}return e.prototype.logData=function(e,r,o,t){for(var n={PublisherID:e.publishers[0].PublisherID,PublisherInfo:[]},i=1;i<=e.adslots.length;i++){var l={AdSlotID:i,AdInfo:{Participants:r,Responses:o[i-1],Winner:t[i-1].Provider}};n.PublisherInfo.push(l)}console.log(n);var s=new XMLHttpRequest;s.open(\"POST\",\"http://localhost:5555/api/generateLog\",!0),s.send(JSON.stringify(n)),s.onreadystatechange=function(){console.log(this.responseText,\"log successful\")}},e}();r.default=t}]);","extractedComments":[]}