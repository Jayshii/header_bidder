{"code":"!function(e){var r={};function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,r,t){o.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},o.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},o.t=function(e,r){if(1&r&&(e=o(e)),8&r)return e;if(4&r&&\"object\"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(o.r(t),Object.defineProperty(t,\"default\",{enumerable:!0,value:e}),2&r&&\"string\"!=typeof e)for(var n in e)o.d(t,n,function(r){return e[r]}.bind(null,n));return t},o.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(r,\"a\",r),r},o.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},o.p=\"\",o(o.s=0)}([function(e,r,o){\"use strict\";r.__esModule=!0;var t=o(1),n=function(e){return e.filter(function(e,r,o){return o.indexOf(e)==r})},i=[{bidprice:0,AdCode:\"\",Provider:\"\",PlacementID:0},{bidprice:0,AdCode:\"\",Provider:\"\",PlacementID:0}],l=[],s=[],d={Provider:[{ProviderID:1,NAME:\"OpenX\",EntryPoint:\"api/OpenX\"},{ProviderID:2,NAME:\"NetApp\",EntryPoint:\"api/NetApp\"},{ProviderID:3,NAME:\"InMobi\",EntryPoint:\"api/InMobi\"}],providersMap:[{RevenueShare:\"0.2\",FloorPrice:20,PlacementID:1,PublisherID:1,AdSlotID:1,ProviderID:1},{RevenueShare:\"0.2\",FloorPrice:20,PlacementID:2,PublisherID:1,AdSlotID:1,ProviderID:2},{RevenueShare:\"0.2\",FloorPrice:20,PlacementID:3,PublisherID:1,AdSlotID:1,ProviderID:3},{RevenueShare:\"0.25\",FloorPrice:40,PlacementID:1,PublisherID:1,AdSlotID:2,ProviderID:1},{RevenueShare:\"0.25\",FloorPrice:40,PlacementID:2,PublisherID:1,AdSlotID:2,ProviderID:2},{RevenueShare:\"0.25\",FloorPrice:40,PlacementID:3,PublisherID:1,AdSlotID:2,ProviderID:3}],adslots:[{ID:1,NAME:\"adslot1\",PublisherID:1,Size:200},{ID:2,NAME:\"adslot2\",PublisherID:1,Size:300}],publishers:[{PublisherID:1,NAME:\"Forbes\",IsActive:\"Y\"}]};function u(){for(var e={PublisherID:d.publishers[0].PublisherID,PublisherInfo:[]},r=1;r<=d.adslots.length;r++){var o={AdSlotID:r,AdInfo:{Participants:l,Responses:s[r-1],Winner:i[r-1].Provider}};e.PublisherInfo.push(o)}console.log(e);var t=new XMLHttpRequest;t.open(\"POST\",\"http://localhost:5555/api/generateLog\",!0),t.send(JSON.stringify(e)),t.onreadystatechange=function(){console.log(this.responseText,\"log successful\")}}!function(e){for(var r,o,d,a={},c=[],p=[],P=0;P<e.adslots.length;P++)r=e.adslots[P].ID,p.push(r),console.log(a);for(var P=1;P<=e.adslots.length;)for(var f=0;f<e.providersMap.length;f++)if(e.providersMap[f].AdSlotID===P){var v=e.adslots[P-1].Size;o=e.providersMap[f].FloorPrice;var h={AdSlotID:P,FloorPrice:o,Size:v};P++,c.push(h),console.log(c)}var I={bidderData:c};a.publishersId=1,a.slotsId=p,a.floorprices=[];for(var D=[],P=0;P<e.Provider.length;P++)d=e.Provider[P].EntryPoint,l.push(e.Provider[P].NAME),D.push(d),console.log(D);var b=(new t.default).getBids(D,I);setTimeout(function(){(b=n(b)).shift();for(var e=0;e<b.length;e++)b[e]=JSON.parse(b[e]);console.log(b,\"this\");for(var r=[],o=0;o<b.length;o++)r.push(b[o].Bidprices[0]),b[o].Bidprices[0]>i[0].bidprice&&(i[0].bidprice=b[o].Bidprices[0],i[0].Provider=b[o].ProviderName,i[0].AdCode=b[o].AdCode,i[0].PlacementID=0);s.push(r),r=[];for(var t=0;t<b.length;t++)r.push(b[t].Bidprices[1]),b[t].Bidprices[1]>i[1].bidprice&&(i[1].bidprice=b[t].Bidprices[1],i[1].Provider=b[t].ProviderName,i[1].AdCode=b[t].AdCode,i[1].PlacementID=0);s.push(r),document.getElementById(\"adslot1\").outerHTML=i[0].AdCode,document.getElementById(\"adslot2\").outerHTML=i[1].AdCode,u()},300)}(d)},function(e,r,o){\"use strict\";r.__esModule=!0;var t=function(){function e(){}return e.prototype.getBids=function(e,r){for(var o=\"\",t=[],n=0;n<e.length;n++){o=\"http://localhost:5555/\"+e[n],console.log(o);var i=new XMLHttpRequest;i.open(\"POST\",o,!0),i.send(JSON.stringify(r)),i.onreadystatechange=function(){console.log(this.responseText),t.push(this.responseText)}}return t},e}();r.default=t}]);","extractedComments":[]}