{"code":"!function(e){var r={};function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,r,t){o.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},o.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},o.t=function(e,r){if(1&r&&(e=o(e)),8&r)return e;if(4&r&&\"object\"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(o.r(t),Object.defineProperty(t,\"default\",{enumerable:!0,value:e}),2&r&&\"string\"!=typeof e)for(var n in e)o.d(t,n,function(r){return e[r]}.bind(null,n));return t},o.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(r,\"a\",r),r},o.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},o.p=\"\",o(o.s=0)}([function(e,r,o){\"use strict\";r.__esModule=!0;for(var t,n=o(1),i=o(2),l=o(3),u=[{bidprice:0,AdCode:\"\",Provider:\"\",PlacementID:0},{bidprice:0,AdCode:\"\",Provider:\"\",PlacementID:0}],s=[],d=[],a={Provider:[{ProviderID:1,NAME:\"OpenX\",EntryPoint:\"api/OpenX\"},{ProviderID:2,NAME:\"NetApp\",EntryPoint:\"api/NetApp\"},{ProviderID:3,NAME:\"InMobi\",EntryPoint:\"api/InMobi\"}],providersMap:[{RevenueShare:\"0.2\",FloorPrice:20,PlacementID:1,PublisherID:1,AdSlotID:1,ProviderID:1},{RevenueShare:\"0.2\",FloorPrice:20,PlacementID:2,PublisherID:1,AdSlotID:1,ProviderID:2},{RevenueShare:\"0.2\",FloorPrice:20,PlacementID:3,PublisherID:1,AdSlotID:1,ProviderID:3},{RevenueShare:\"0.25\",FloorPrice:40,PlacementID:1,PublisherID:1,AdSlotID:2,ProviderID:1},{RevenueShare:\"0.25\",FloorPrice:40,PlacementID:2,PublisherID:1,AdSlotID:2,ProviderID:2},{RevenueShare:\"0.25\",FloorPrice:40,PlacementID:3,PublisherID:1,AdSlotID:2,ProviderID:3}],adslots:[{ID:1,NAME:\"adslot1\",PublisherID:1,Size:200},{ID:2,NAME:\"adslot2\",PublisherID:1,Size:300}],publishers:[{PublisherID:1,NAME:\"Forbes\",IsActive:\"Y\"}]},c=[],p=0;p<a.Provider.length;p++)t=a.Provider[p].EntryPoint,s.push(a.Provider[p].NAME),c.push(t),console.log(c);var f=(new n.default).getBids(a,c);setTimeout(function(){(f=f.filter(function(e,r,o){return o.indexOf(e)==r})).shift();for(var e=0;e<f.length;e++)f[e]=JSON.parse(f[e]);console.log(f);var r=new l.default;u=r.conductAuction(f,u),d=r.registerBids(f,d),document.getElementById(\"adslot1\").outerHTML=u[0].AdCode,document.getElementById(\"adslot2\").outerHTML=u[1].AdCode,(new i.default).logData(a,s,d,u)},300)},function(e,r,o){\"use strict\";r.__esModule=!0;var t=function(){function e(){}return e.prototype.getBids=function(e,r){for(var o=[],t=1;t<=e.adslots.length;)for(var n=0;n<e.providersMap.length;n++)if(e.providersMap[n].AdSlotID===t){var i=e.adslots[t-1].Size,l={AdSlotID:t,FloorPrice:e.providersMap[n].FloorPrice,Size:i};t++,o.push(l),console.log(o)}for(var u={bidderData:o},s=\"\",d=[],a=0;a<r.length;a++){s=\"http://localhost:5555/\"+r[a],console.log(s);var c=new XMLHttpRequest;c.open(\"POST\",s,!0),c.send(JSON.stringify(u)),c.onreadystatechange=function(){console.log(this.responseText),d.push(this.responseText)}}return d},e}();r.default=t},function(e,r,o){\"use strict\";r.__esModule=!0;var t=function(){function e(){}return e.prototype.logData=function(e,r,o,t){for(var n={PublisherID:e.publishers[0].PublisherID,PublisherInfo:[]},i=1;i<=e.adslots.length;i++){var l={AdSlotID:i,AdInfo:{Participants:r,Responses:o[i-1],Winner:t[i-1].Provider}};n.PublisherInfo.push(l)}console.log(n);var u=new XMLHttpRequest;u.open(\"POST\",\"http://localhost:5555/api/generateLog\",!0),u.send(JSON.stringify(n)),u.onreadystatechange=function(){console.log(this.responseText,\"log successful\")}},e}();r.default=t},function(e,r,o){\"use strict\";r.__esModule=!0;var t=function(){function e(){}return e.prototype.conductAuction=function(e,r){for(var o=0;o<e.length;o++)e[o].Bidprices[0]>r[0].bidprice&&(r[0].bidprice=e[o].Bidprices[0],r[0].Provider=e[o].ProviderName,r[0].AdCode=e[o].AdCode,r[0].PlacementID=0);for(var t=0;t<e.length;t++)e[t].Bidprices[1]>r[1].bidprice&&(r[1].bidprice=e[t].Bidprices[1],r[1].Provider=e[t].ProviderName,r[1].AdCode=e[t].AdCode,r[1].PlacementID=0);return r},e.prototype.registerBids=function(e,r){for(var o=[],t=0;t<e.length;t++)o.push(e[t].Bidprices[0]);r.push(o),o=[];for(var n=0;n<e.length;n++)o.push(e[n].Bidprices[1]);return r.push(o),r},e}();r.default=t}]);","extractedComments":[]}